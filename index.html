<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- =============================================
     C√ì TH·ªÇ S·ª¨A: TI√äU ƒê·ªÄ TRANG WEB
     ============================================= -->
<title>XMOD ChatGPT - Phi√™n b·∫£n Mod (VIP)</title>
<style>
  /* ===========================
     C√ì TH·ªÇ S·ª¨A: M√ÄU S·∫ÆC CH·ª¶ ƒê·∫†O
     =========================== */
  :root{
    --bg1:#0a0a0a;
    --bg2:#1a1a1a;
    --accent: #ffffff;
    --accent2: #666666;
    --card-bg: rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.05);
    --muted:#cccccc;
    --border: rgba(255,255,255,0.1);
    --grad2: #7209b7;
    --grad3: #f72585;
  }
  
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, "Inter", Arial, sans-serif;
    color:#fff;
    background: linear-gradient(135deg, var(--bg1), var(--bg2), #2a2a2a);
    -webkit-font-smoothing:antialiased;
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }


  /* ===========================
     HEADER - PH·∫¶N ƒê·∫¶U TRANG
     =========================== */
  .header{
    display:flex;
    gap:12px;
    align-items:center;
    padding:18px;
    background: linear-gradient(90deg, rgba(0,0,0,0.25), rgba(255,255,255,0.02));
    border-bottom: 1px solid rgba(255,255,255,0.04);
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  }
  .logo{
    width:64px;height:64px;border-radius:50%;flex:0 0 64px;
    overflow:hidden;border:3px solid var(--accent);box-shadow:0 6px 30px rgba(247,37,133,0.15);
  }
  .logo img{width:100%;height:100%;object-fit:cover;display:block}
  .hdr-title{
    display:flex;flex-direction:column;
  }
  .hdr-title h1{font-size:18px;margin:0;letter-spacing:1px;text-shadow:0 0 12px rgba(247,37,133,0.6)}
  .hdr-title p{margin:2px 0 0;color:var(--muted);font-size:13px}

  .hdr-actions{margin-left:auto;display:flex;gap:8px;align-items:center}
  .hdr-actions a{color:#fff;text-decoration:none;padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,var(--grad2),var(--grad3));box-shadow:0 6px 18px rgba(0,0,0,0.25);font-weight:600;font-size:13px}

  /* ===========================
     LAYOUT CH√çNH
     =========================== */
  .wrap{display:flex;gap:20px;padding:20px;flex:1;max-width:800px;margin:0 auto;width:100%}
.left{
  flex:1;
  display:flex;
  flex-direction:column;
  min-height:400px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  border-radius:14px;padding:14px;backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
}
.right{
  display:none; /* ·∫®n sidebar */
}

  /* PH·∫¶N CHAT */
  .chat-window{flex:1;display:flex;flex-direction:column;overflow:hidden;border-radius:10px;background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));padding:12px}
  .messages{flex:1;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
  .bubble{max-width:80%;padding:12px 14px;border-radius:16px;line-height:1.4;word-break:break-word}
  .bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--grad2),var(--grad3));box-shadow: 0 6px 18px rgba(247,37,133,0.15)}
  .bubble.bot{align-self:flex-start;background:var(--card-bg);box-shadow:0 4px 18px rgba(0,0,0,0.35)}
  .bubble.bot a{color:var(--accent);text-decoration:underline}

  .meta {font-size:12px;color:var(--muted);margin-bottom:6px}
  .typing {height:10px;width:40px;border-radius:5px;background:linear-gradient(90deg,#ffffff33,#ffffff11);animation: blink 1s infinite}
  @keyframes blink{0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2}}

  /* PH·∫¶N NH·∫¨P LI·ªÜU */
  .input-row{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(255,255,255,0.03);align-items:center}
  .input-row input{flex:1;padding:12px 14px;border-radius:30px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;outline:none}
  .btn-send{padding:10px 16px;border-radius:30px;border:none;background:linear-gradient(90deg,var(--grad2),var(--grad3));color:#fff;font-weight:700;cursor:pointer;box-shadow:0 8px 30px rgba(247,37,133,0.12)}

  /* N√öT L·ªÜNH NHANH */
  .quick{display:flex;gap:8px;padding:10px 0;flex-wrap:wrap}
  .chip{background:var(--glass);padding:8px 12px;border-radius:20px;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
  .chip:hover{background:linear-gradient(90deg,#ffffff10,#ffffff06);color:#fff}

  /* THANH B√äN PH·∫¢I - DANH S√ÅCH MOD */
  .right{
    width:360px;
    display:flex;
    flex-direction:column;gap:14px;
  }
  .panel{background:var(--card-bg);border-radius:12px;padding:12px;box-shadow:0 10px 30px rgba(0,0,0,0.35);backdrop-filter:blur(8px)}
  .mod-card{display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));cursor:pointer;transition:transform .18s}
  .mod-card:hover{transform:translateY(-6px)}
  .mod-thumb{width:72px;height:72px;border-radius:8px;overflow:hidden;flex:0 0 72px;border:2px solid rgba(255,255,255,0.03)}
  .mod-thumb img{width:100%;height:100%;object-fit:cover}
  .mod-info h4{margin:0 0 6px 0;font-size:15px}
  .mod-info p{margin:0;color:var(--muted);font-size:13px}
  .mod-actions{margin-left:auto;display:flex;gap:8px}
  .tiny-btn{padding:8px 10px;border-radius:8px;border:none;background:#7209b7;color:#fff;cursor:pointer;font-weight:700}
  .music-control{position:fixed; bottom:20px; right:20px; background:var(--card-bg); padding:12px;border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.4);backdrop-filter:blur(10px); display:none; z-index:1000; min-width:250px;}
  .music-control.show{display:block}
  .music-title{font-size:14px; font-weight:600; color:#fff; margin-bottom:8px;}
  .music-buttons{display:flex; gap:8px; align-items:center;}
  .music-btn{padding:6px 10px; border:none; border-radius:6px;background:linear-gradient(90deg,var(--grad2),var(--grad3));color:#fff; cursor:pointer; font-size:11px; font-weight:600;}
  .volume-control{display:flex; align-items:center; gap:8px; margin-top:8px;}
  .volume-slider{flex:1; height:4px; background:rgba(255,255,255,0.2); border-radius:2px;}
  @media(max-width:980px){
  .music-control{bottom:10px; right:10px; min-width:220px;}
}  /* ‚Üê TH√äM D·∫§U } N√ÄY */

  /* RESPONSIVE CHO MOBILE */
  @media(max-width:980px){
    .wrap{flex-direction:column;padding:12px}
    .right{width:100%}
  }
</style>
</head>
<body>

  <!-- =============================================
       C√ì TH·ªÇ S·ª¨A: PH·∫¶N HEADER
       ============================================= -->
  <div class="header">
    <!-- S·ª¨A LOGO T·∫†I ƒê√ÇY -->
    <div class="logo"><img src="https://i.postimg.cc/T3SYQ8zK/Polish-20250822-083928173.png" alt="XMOD"></div>
    <div class="hdr-title">
      <!-- S·ª¨A TI√äU ƒê·ªÄ V√Ä M√î T·∫¢ -->
      <h1>‚ö° XMOD Chat (VIP)</h1>
      <p>Chat h·ªó tr·ª£ mod ‚Äî g√µ l·ªánh ho·∫∑c b·∫•m n√∫t nhanh</p>
    </div>
    <div class="hdr-actions">
      <!-- S·ª¨A LINK WEBSITE V√Ä YOUTUBE -->
      <a href="https://modskinaov.github.io/Xmod." target="_blank">Website</a>
      <a href="https://youtube.com/@xmod-b7i" target="_blank">YouTube</a>
    </div>
  </div>
  
  
  <!-- ƒêI·ªÄU KHI·ªÇN NH·∫†C N·ªÄN - M·ªöI TH√äM -->
<div class="music-control" id="musicControl">
  <div class="music-title" id="musicTitle">üéµ Ch∆∞a c√≥ nh·∫°c</div>
  <div class="music-buttons">
    <button class="music-btn" id="playBtn">‚ñ∂Ô∏è Play</button>
    <button class="music-btn" id="pauseBtn">‚è∏Ô∏è Pause</button>
    <button class="music-btn" id="stopBtn">‚èπÔ∏è Stop</button>
  </div>
  <div class="volume-control">
    <span>üîä</span>
    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
  </div>
</div>


  <!-- LAYOUT CH√çNH -->
  <div class="wrap">
    <!-- B√äN TR√ÅI: PH·∫¶N CHAT -->
    <div class="left">
      <div class="chat-window">
        <!-- =============================================
             C√ì TH·ªÇ S·ª¨A: C√ÅC N√öT L·ªÜNH NHANH
             ============================================= -->
        <div class="quick" id="quickCommands">
          <!-- C√≥ th·ªÉ th√™m/s·ª≠a/x√≥a c√°c n√∫t l·ªánh ·ªü ƒë√¢y -->
          <div class="chip" data-cmd="help">help</div>
          <div class="chip" data-cmd="laymod">laymod</div>
          <div class="chip" data-cmd="g·ª£i √Ω skin">g·ª£i √Ω skin</div>
          <div class="chip" data-cmd="update">update</div>
          <div class="chip" data-cmd="donate">donate</div>
          <div class="chip" data-cmd="ch√©m gi√≥">ch√©m gi√≥</div>
          <!-- 2 N√öT M·ªöI TH√äM -->
         <div class="chip" data-cmd="ch·ªçn nh·∫°c">ch·ªçn nh·∫°c</div>
         <div class="chip" data-cmd="x√≥a l·ªãch s·ª≠">x√≥a l·ªãch s·ª≠</div>
        </div>

        <!-- Khu v·ª±c hi·ªÉn th·ªã tin nh·∫Øn -->
        <div class="messages" id="messages"></div>

        <!-- √î nh·∫≠p l·ªánh -->
        <div class="input-row">
          <input id="inp" placeholder="Nh·∫≠p l·ªánh ho·∫∑c chat... (g√µ 'help' ƒë·ªÉ xem)"/>
          <button class="btn-send" id="sendBtn">G·ª≠i</button>
        </div>
      </div>
    </div>

    <!-- B√äN PH·∫¢I: DANH S√ÅCH MOD V√Ä DONATE -->
    <div class="right">
      <!-- Panel danh s√°ch mod -->
      <div class="panel">
        <h3 style="margin:0 0 10px 0">C√°c mod hi·ªán ƒëang c√≥</h3>
        <div id="modsList">
          <!-- Danh s√°ch mod s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông t·∫°o t·ª´ JavaScript -->
        </div>
      </div>

      <!-- =============================================
           C√ì TH·ªÇ S·ª¨A: TH√îNG TIN DONATE
           ============================================= -->
      <div class="panel">
        <h3 style="margin:0 0 10px 0">·ª¶ng h·ªô t√°c gi·∫£</h3>
        <p style="color:var(--muted);font-size:14px">Qu√©t QR ho·∫∑c chuy·ªÉn kho·∫£n VietinBank ƒë·ªÉ ·ªßng h·ªô XMOD ph√°t tri·ªÉn mod nhanh h∆°n.</p>
        <div style="display:flex;gap:8px;align-items:center;margin-top:10px">
          <!-- S·ª¨A QR CODE V√Ä TH√îNG TIN T√ÄI KHO·∫¢N -->
          <img src="https://i.postimg.cc/YqG9JCtp/i-Pay-Fri-Aug-22-10-47-44-GMT-07-00-2025.jpg" alt="QR" style="width:110px;height:110px;border-radius:8px;object-fit:cover;border:2px solid rgba(255,255,255,0.04)">
          <div style="font-size:14px;color:var(--muted)">
            <strong>VietinBank</strong><br>
            0123456789<br>
            M·∫π T√¥i:)
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- AUDIO ELEMENT CHO NH·∫†C N·ªÄN - M·ªöI TH√äM -->
<audio id="backgroundMusic" loop></audio>

<script>
/* =============================================
   QUAN TR·ªåNG: DANH S√ÅCH MOD - D·ªÑ S·ª¨A NH·∫§T
   - Th√™m/s·ª≠a/x√≥a mod t·∫°i ƒë√¢y
   - M·ªói mod c·∫ßn: id, title, desc, thumb, link
   ============================================= */
   const MUSIC_LIST = [
  {
    id: "music1", title: "legendary ",
    url: "https://www.dropbox.com/scl/fi/003fj25b92y8jio117ip9/Legends-Never-Die-ft.-Against-The-Current-Worlds-2017-League-of-Legends.mp3?rlkey=s3qb0nb4ypbjj4w8kqrzq1udy&st=xr6vsasb&dl=1" // ‚Üê S·ª¨A LINK NH·∫†C T·∫†I ƒê√ÇY
  },
  {
    id: "music2", title: "ƒëang update", 
    url: "THAY_LINK_NH·∫†C_2_T·∫†I_ƒê√ÇY.mp3" // ‚Üê S·ª¨A LINK NH·∫†C T·∫†I ƒê√ÇY
  },
  {
    id: "music3", title: "ƒëang update",
    url: "THAY_LINK_NH·∫†C_3_T·∫†I_ƒê√ÇY.mp3" // ‚Üê S·ª¨A LINK NH·∫†C T·∫†I ƒê√ÇY
  }
];
const MODS = [
   
  { 
    id:"m1", 
    title:"Nakroth T·ª≠ L√¥i Th·∫ßn Ng∆∞u",           // T√äN MOD
    desc:"Hi·ªáu ·ª©ng s·∫•m s√©t t√≠m, ulti ho√†nh tr√°ng", // M√î T·∫¢
    thumb:"https://i.postimg.cc/qv9G4yx7/skin-lien-quan-1.jpg", // ·∫¢NH THUMBNAIL
    link:"https://gofile.io/d/45ZG6L"            // LINK T·∫¢I
  },
  { 
    id:"m2", 
    title:"Allain Gojo Satoru", 
    desc:"Mod Allain bi·∫øn th√†nh Gojo - hi·ªáu ·ª©ng √°nh s√°ng", 
    thumb:"https://i.postimg.cc/qMpJDFfJ/skin-moi-lien-quan-3-c5bbe99eb1.png", 
    link:"https://gofile.io/d/xxxx" 
  },
  { 
    id:"m3", 
    title:"Resources 17.8 Pack", 
    desc:"Full resources c·∫≠p nh·∫≠t 17.8", 
    thumb:"https://i.postimg.cc/J4FFHy5f/folder-la-gi.jpg", 
    link:"https://gofile.io/d/45ZG6L" 
  }
  // TH√äM MOD M·ªöI ·ªû ƒê√ÇY THEO ƒê·ªäNH D·∫†NG T∆Ø∆†NG T·ª∞
];

/* =============================================
   H·ªÜ TH·ªêNG T·∫†O DANH S√ÅCH MOD T·ª∞ ƒê·ªòNG
   ============================================= */
const modsListEl = document.getElementById("modsList");
function renderMods(){
  modsListEl.innerHTML = "";
  MODS.forEach(m=>{
    const el = document.createElement("div");
    el.className = "mod-card";
    el.innerHTML = `
      <div class="mod-thumb"><img src="${m.thumb}" alt="${m.title}"></div>
      <div class="mod-info">
        <h4>${m.title}</h4>
        <p>${m.desc}</p>
      </div>
      <div class="mod-actions">
        <button class="tiny-btn" data-id="${m.id}" onclick="copyLink('${m.link}')">Sao ch√©p</button>
        <button class="tiny-btn" onclick="openLink('${m.link}')">T·∫£i</button>
      </div>
    `;
    // Click v√†o card s·∫Ω hi·ªÉn th·ªã mod trong chat
    el.addEventListener("click", ()=> showModInChat(m));
    modsListEl.appendChild(el);
  })
}
// H·ªÜ TH·ªêNG NH·∫†C N·ªÄN - M·ªöI TH√äM
const audioEl = document.getElementById("backgroundMusic");
const musicControl = document.getElementById("musicControl");
const musicTitle = document.getElementById("musicTitle");
const playBtn = document.getElementById("playBtn");
const pauseBtn = document.getElementById("pauseBtn");
const stopBtn = document.getElementById("stopBtn");
const volumeSlider = document.getElementById("volumeSlider");

let currentMusicIndex = -1;
audioEl.volume = 0.5;

// Event listeners cho ƒëi·ªÅu khi·ªÉn nh·∫°c
playBtn.addEventListener("click", ()=> {
  if(audioEl.src) {
    audioEl.play().catch(e => console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", e));
    addBotMsg("üéµ ƒê√£ ph√°t nh·∫°c");
  } else {
    addBotMsg("‚ö†Ô∏è Ch∆∞a ch·ªçn nh·∫°c. G√µ l·ªánh <b>ch·ªçn nh·∫°c</b> ƒë·ªÉ ch·ªçn.");
  }
});

pauseBtn.addEventListener("click", ()=> {
  audioEl.pause();
  addBotMsg("‚è∏Ô∏è ƒê√£ t·∫°m d·ª´ng nh·∫°c");
});

stopBtn.addEventListener("click", ()=> {
  audioEl.pause();
  audioEl.currentTime = 0;
  addBotMsg("‚èπÔ∏è ƒê√£ d·ª´ng nh·∫°c");
});

volumeSlider.addEventListener("input", ()=> {
  audioEl.volume = volumeSlider.value / 100;
});

// H√†m ch·ªçn nh·∫°c - M·ªöI TH√äM
function selectMusic(index) {
  if(index >= 0 && index < MUSIC_LIST.length) {
    currentMusicIndex = index;
    const music = MUSIC_LIST[index];
    audioEl.src = music.url;
    musicTitle.textContent = `üéµ ${music.title}`;
    musicControl.classList.add("show");
    addBotMsg(`üéµ ƒê√£ ch·ªçn nh·∫°c: <b>${music.title}</b><br>B·∫•m n√∫t Play ƒë·ªÉ ph√°t nh·∫°c.`);
  }
}
renderMods(); // T·∫°o danh s√°ch mod

/* =============================================
   TI·ªÜN √çCH: M·ªû LINK V√Ä SAO CH√âP
   ============================================= */
function openLink(url){
  window.open(url, "_blank");
}
function copyLink(url){
  navigator.clipboard?.writeText(url).then(()=> {
    addBotMsg("Link ƒë√£ sao ch√©p v√†o clipboard ‚úÖ");
  }).catch(()=> {
    addBotMsg("Kh√¥ng th·ªÉ sao ch√©p. M·ªü link ƒë·ªÉ t·∫£i: <a href='"+url+"' target='_blank'>M·ªü link</a>");
  });
}

/* =============================================
   H·ªÜ TH·ªêNG CHAT - L∆ØU TR·ªÆ TIN NH·∫ÆN
   ============================================= */
const messagesEl = document.getElementById("messages");
const STORAGE_KEY = "xmod_chat_history_v1"; // T√™n key l∆∞u tr·ªØ

// T·∫£i l·ªãch s·ª≠ chat t·ª´ tr√¨nh duy·ªát
let HISTORY = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
HISTORY.forEach(item=>{
  appendMessageToDom(item);
});
scrollToBottom();

// H√†m h·ªó tr·ª£ hi·ªÉn th·ªã tin nh·∫Øn
function appendMessageToDom(item){
  const div = document.createElement("div");
  div.className = "bubble " + (item.sender==="user" ? "user" : "bot");
  if(item.meta){ div.innerHTML = `<div class="meta">${item.meta}</div>` + item.html; }
  else div.innerHTML = item.html;
  messagesEl.appendChild(div);
  scrollToBottom();
}
function saveToHistory(obj){
  HISTORY.push(obj);
  if(HISTORY.length>200) HISTORY.shift(); // Gi·ªõi h·∫°n 200 tin nh·∫Øn
  localStorage.setItem(STORAGE_KEY, JSON.stringify(HISTORY));
}
function addUserMsg(text){
  const obj = {sender:"user", html: escapeHtml(text)};
  appendMessageToDom(obj);
  saveToHistory(obj);
}
function addBotMsg(html, meta){
  const obj = {sender:"bot", html: html, meta: meta || ""};
  appendMessageToDom(obj);
  saveToHistory(obj);
}
function scrollToBottom(){
  setTimeout(()=> messagesEl.scrollTop = messagesEl.scrollHeight, 80);
}
// H√ÄM X√ìA L·ªäCH S·ª¨ CHAT - M·ªöI TH√äM
function clearChatHistory() {
  localStorage.removeItem(STORAGE_KEY);
  messagesEl.innerHTML = "";
  HISTORY = [];
  addBotMsg("üóëÔ∏è ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠ chat!");
}
function escapeHtml(str){
  return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>');
}

/* =============================================
   BOT LOGIC - C√ÅC L·ªÜNH C√ì TH·ªÇ S·ª¨A
   ============================================= */
function handleCommand(input){
  const cmd = input.trim().toLowerCase();

  // L·ªÜNH HELP - Hi·ªÉn th·ªã tr·ª£ gi√∫p
  if(cmd==="help"){
    const html = `
      <b>Danh s√°ch l·ªánh:</b><br>
      - <b>laymod</b> : Link t·∫£i mod m·ªõi nh·∫•t<br>
      - <b>g·ª£i √Ω skin</b> : G·ª£i √Ω t·ª´ danh s√°ch mod hi·ªán c√≥<br>
      - <b>allmods</b> : Hi·ªán to√†n b·ªô mod trong chat<br>
      - <b>donate</b> : Hi·ªÉn th·ªã QR donate<br>
      - <b>update</b> : Th√¥ng b√°o c·∫≠p nh·∫≠t m·ªõi<br>
      - <b>youtube</b> : Link k√™nh XMOD<br>
      - <b>ch√©m gi√≥</b> : Bot ch√©m gi√≥ vui v·∫ª<br>
      - <b>ch·ªçn nh·∫°c</b> : Ch·ªçn nh·∫°c n·ªÅn cho website üéµ<br>
      - <b>x√≥a l·ªãch s·ª≠</b> : X√≥a to√†n b·ªô l·ªãch s·ª≠ chat üóëÔ∏è
    `;
    addBotMsg(html);
    return;
  }

  // L·ªÜNH LAYMOD - L·∫•y mod m·ªõi nh·∫•t (mod ƒë·∫ßu ti√™n trong danh s√°ch)
  if(cmd==="laymod"){
    const m = MODS[0];
    const html = renderModCardHtml(m);
    addBotMsg(`üì• Link mod m·ªõi nh·∫•t:<br>${html}`);
    return;
  }

  // L·ªÜNH ALLMODS - Hi·ªÉn th·ªã t·∫•t c·∫£ mod
  if(cmd==="allmods"){
    let html = `<b>Danh s√°ch mod hi·ªán c√≥:</b><br>`;
    MODS.forEach(m=>{
      html += renderModCardHtml(m) + "<br>";
    });
    addBotMsg(html);
    return;
  }

  // L·ªÜNH G·ª¢I √ù SKIN - Ch·ªçn ng·∫´u nhi√™n 1 mod
  if(cmd==="g·ª£i √Ω skin" || cmd==="goi y skin" || cmd==="goiyskin"){
    const m = MODS[Math.floor(Math.random()*MODS.length)];
    addBotMsg(`ü§î G·ª£i √Ω cho b·∫°n: <b>${m.title}</b><br>${renderModCardHtml(m)}`);
    return;
  }

  // =============================================
  //    C√ì TH·ªÇ S·ª¨A: TH√îNG TIN DONATE
  // =============================================
  if(cmd==="donate"){
    const html = `
      <b>üíù ·ª¶ng h·ªô XMOD</b><br>
      <img src="https://i.postimg.cc/YqG9JCtp/i-Pay-Fri-Aug-22-10-47-44-GMT-07-00-2025.jpg" alt="QR" style="width:180px;border-radius:8px;margin-top:8px"><br>
      VietinBank: <b>0123456789</b><br>Ch·ªß TK: <b>NGUYEN VAN A</b>
    `;
    addBotMsg(html);
    return;
  }

  // =============================================
  //    C√ì TH·ªÇ S·ª¨A: TH√îNG B√ÅO UPDATE
  // =============================================
  if(cmd==="update"){
    addBotMsg("üÜï C·∫≠p nh·∫≠t: ƒê√£ th√™m mod <b>" + MODS[0].title + "</b> v√† pack Resources 17.8.");
    return;
  }

  // L·ªÜNH YOUTUBE
  if(cmd==="youtube"){
    addBotMsg(`üé¨ K√™nh YouTube: <a href="https://youtube.com/@xmod-b7i" target="_blank">XMOD Official</a>`);
    return;
  }

   // L·ªÜNH CH·ªåN NH·∫†C - M·ªöI TH√äM
if(cmd==="ch·ªçn nh·∫°c" || cmd==="chon nhac" || cmd==="music"){
  let html = `
    <b>üéµ Danh s√°ch nh·∫°c n·ªÅn:</b><br>
    Ch·ªçn nh·∫°c b·∫±ng c√°ch g√µ s·ªë (VD: g√µ "1" ƒë·ªÉ ch·ªçn nh·∫°c 1)<br><br>
  `;
  MUSIC_LIST.forEach((music, index) => {
    html += `<b>${index + 1}</b>. ${music.title}<br>`;
  });
  html += `<br><i>Sau khi ch·ªçn, d√πng n√∫t ƒëi·ªÅu khi·ªÉn ·ªü g√≥c d∆∞·ªõi ƒë·ªÉ ph√°t nh·∫°c.</i>`;
  addBotMsg(html);
  return;
}

// X·ª¨ L√ù CH·ªåN NH·∫†C THEO S·ªê - M·ªöI TH√äM
const musicNumber = parseInt(cmd);
if(musicNumber >= 1 && musicNumber <= MUSIC_LIST.length) {
  selectMusic(musicNumber - 1);
  return;
}

// L·ªÜNH X√ìA L·ªäCH S·ª¨ - M·ªöI TH√äM
if(cmd==="x√≥a l·ªãch s·ª≠" || cmd==="xoa lich su" || cmd==="clear" || cmd==="x√≥a chat"){
  const confirmMsg = `
    <b>‚ö†Ô∏è X√°c nh·∫≠n x√≥a l·ªãch s·ª≠?</b><br>
    G√µ <b>"x√°c nh·∫≠n x√≥a"</b> ƒë·ªÉ x√≥a to√†n b·ªô l·ªãch s·ª≠ chat.<br>
    <i>H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!</i>
  `;
  addBotMsg(confirmMsg);
  return;
}

// X√ÅC NH·∫¨N X√ìA - M·ªöI TH√äM
if(cmd==="x√°c nh·∫≠n x√≥a" || cmd==="xac nhan xoa" || cmd==="confirm delete"){
  clearChatHistory();
  return;
}
  // =============================================
  //    C√ì TH·ªÇ S·ª¨A: C√ÅC C√ÇU CH√âM GI√ì
  // =============================================
  if(cmd==="ch√©m gi√≥" || cmd==="chem gio"){
  const jokes = [
    "‚ö° Nakroth m√† ƒÉn s√©t Toro th√¨ g√°nh team lu√¥n!",
    "M√¨nh l√† XMOD GPT, chuy√™n gia mod ·∫£o nh∆∞ng th·ª±c t·∫ø th√¨... m√¨nh c≈©ng c·∫ßn coffee ‚òï",
    "B·∫°n mod nhi·ªÅu th√¨ ƒë·ª´ng qu√™n donate ƒë·ªÉ m√¨nh kh·ªèi ƒÉn m√¨ g√≥i üòÜ",
    "üéµ Nghe nh·∫°c trong l√∫c mod s·∫Ω th·∫•y ƒë√£ h∆°n ƒë·∫•y!",
    "Chat v·ªõi bot m√† vui nh∆∞ chat v·ªõi crush v·∫≠y üòé"
  ];
  addBotMsg(jokes[Math.floor(Math.random()*jokes.length)]);
  return;
}

// T√¨m ki·∫øm mod theo t√™n
const found = MODS.find(m=> m.title.toLowerCase().includes(cmd));
if(found){
  addBotMsg(`üîé M√¨nh t√¨m th·∫•y mod ph√π h·ª£p:<br>${renderModCardHtml(found)}`);
  return;
}

// Tr·∫£ l·ªùi m·∫∑c ƒë·ªãnh khi kh√¥ng hi·ªÉu l·ªánh
addBotMsg("M√¨nh ch∆∞a hi·ªÉu l·ªánh n√†y ü§î. G√µ <b>help</b> ƒë·ªÉ xem l·ªánh ho·∫∑c th·ª≠ t√™n mod b·∫°n mu·ªën.");
}

/* H√†m t·∫°o HTML card cho mod trong chat */
function renderModCardHtml(m){
  return `
    <div style="display:flex;gap:10px;align-items:center;">
      <div style="width:86px;height:64px;flex:0 0 86px;border-radius:8px;overflow:hidden;border:2px solid rgba(255,255,255,0.04)">
        <img src="${m.thumb}" style="width:100%;height:100%;object-fit:cover" alt="${m.title}">
      </div>
      <div style="flex:1">
        <div style="font-weight:700">${m.title}</div>
        <div style="color:#cbbfdc;font-size:13px;margin-top:6px">${m.desc}</div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <a href="${m.link}" target="_blank" style="padding:8px 12px;border-radius:8px;background:linear-gradient(90deg,#7209b7,#f72585);color:#fff;font-weight:700;text-decoration:none">T·∫£i</a>
          <button onclick="copyLink('${m.link}')" style="padding:8px 12px;border-radius:8px;border:none;background:#2b2b45;color:#fff;cursor:pointer">Sao ch√©p link</button>
        </div>
      </div>
    </div>
  `;
}

/* X·ª¨ L√ù S·ª∞ KI·ªÜN: G·ª¨I TIN NH·∫ÆN */
const inp = document.getElementById("inp");
const sendBtn = document.getElementById("sendBtn");
sendBtn.addEventListener("click", onSend);
inp.addEventListener("keypress", (e)=>{ if(e.key==="Enter") onSend(); });

function onSend(){
  const text = inp.value.trim();
  if(!text) return;
  addUserMsg(text);
  inp.value="";
  
  const typingDiv = document.createElement("div");
  typingDiv.className = "bubble bot";
  typingDiv.innerHTML = `<div class="typing"></div>`;
  messagesEl.appendChild(typingDiv);
  scrollToBottom();
  
  setTimeout(()=> {
    typingDiv.remove();
    handleCommand(text);
  }, 600 + Math.random()*800);
}

document.querySelectorAll(".chip").forEach(el=>{
  el.addEventListener("click", ()=>{
    const c = el.getAttribute("data-cmd");
    inp.value = c;
    inp.focus();
  });
});

function showModInChat(m){
  addBotMsg(renderModCardHtml(m), "Th√¥ng tin mod");
}

window.addEventListener("keydown", (e)=>{
  if(e.ctrlKey && e.key.toLowerCase()==='k'){
    if(confirm("X√≥a l·ªãch s·ª≠ chat?")) { 
      clearChatHistory();
    }
  }
});

if(HISTORY.length===0){
  addBotMsg("Xin ch√†o üëã! M√¨nh l√† <b>XMOD Chat</b> ‚Äî g√µ <b>help</b> ƒë·ªÉ xem l·ªánh. B·∫°n c√≥ th·ªÉ b·∫•m c√°c n√∫t nhanh b√™n tr√™n.<br><br>üéµ <i>Th·ª≠ l·ªánh 'ch·ªçn nh·∫°c' ƒë·ªÉ nghe nh·∫°c n·ªÅn nh√©!</i>");
}

window.XMOD = {MODS, MUSIC_LIST, addBotMsg, addUserMsg, renderMods, copyLink, openLink, selectMusic, clearChatHistory};

</script>
</body>
</html>
